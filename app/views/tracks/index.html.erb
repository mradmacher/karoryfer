<%= render_title album.title %>
<h2>
  <%= album.title %>
  <% unless album.published? %>
    <small><%= t('label.album.unpublished') %></span>
  <% end %>
</h2>
<h3><%= t('title.track.index') %></h3>
<p>
  <a href="<%= album.path %>" class="btn btn-warning btn-xs"><%=t 'action.cancel_new' %></a>
</p>

<ul>
  <% album.tracks.each do |track| %>
    <li>
      <%= track.rank %>.
      <%= track.title %>
      <% if !track.artist_name.blank? or !track.comment.blank? -%>
        <br /><small><%= [track.artist_name, track.comment].select{ |s| !s.blank? }.join(' - ') %></small>
      <% end -%>
      <br />
      <% if current_user.can_manage_tracks?(album.resource) %>
        <div class="btn-group">
          <a href="<%= edit_artist_album_track_path(album.artist, album.resource, track) %>" class="btn btn-default btn-xs">
            <%=t 'action.edit' %>
          </a>
          <a href="<%= artist_album_track_path(album.artist, album.resource, track) %>" class="btn btn-danger btn-xs" data-method="delete" data-confirm="<%=t 'action.destroy_confirmation' %>">
            <%=t 'action.delete' %>
          </a>
        </div>
      <% end %>
    </li>
  <% end %>
</ul>

<h3><%= t('title.track.new') %></h3>
<%= render :partial => 'form', locals: { resource: @presenter.resource } %>
